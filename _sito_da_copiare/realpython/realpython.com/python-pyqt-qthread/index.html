
<!doctype html>
<html lang="en">
<head>
<link href="https://cdn.realpython.com" rel="preconnect">
<link href="https://files.realpython.com" rel="preconnect">
<title>Use PyQt&#x27;s QThread to Prevent Freezing GUIs – Real Python</title>
<meta name="author" content="Real Python">
<meta name="description" content="In this step-by-step tutorial, you’ll learn how to prevent freezing GUIs by offloading long-running tasks to worker QThreads in PyQt.">
<meta name="keywords" content="">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover">
<link rel="stylesheet" href="https://cdn.realpython.com/static/realpython.min.1ecfd4a9d422.css">
<link rel="stylesheet" href="https://cdn.realpython.com/static/gfonts/font.08e909e5f3d4.css">
<link rel="preload" href="https://cdn.realpython.com/static/glightbox.min.f69035b3cab2.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://cdn.realpython.com/static/glightbox.min.f69035b3cab2.css"></noscript>
<link rel="canonical" href="https://realpython.com/python-pyqt-qthread/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://files.realpython.com/media/Using-Threads-in-PyQt_Watermarked.4976dbadca32.jpg">
<meta property="og:image" content="https://files.realpython.com/media/Using-Threads-in-PyQt_Watermarked.4976dbadca32.jpg">
<meta name="twitter:creator" content="@realpython">
<meta name="twitter:site" content="@realpython">
<meta property="og:title" content="Use PyQt&#x27;s QThread to Prevent Freezing GUIs – Real Python">
<meta property="og:type" content="article">
<meta property="og:url" content="https://realpython.com/python-pyqt-qthread/">
<meta property="og:description" content="In this step-by-step tutorial, you’ll learn how to prevent freezing GUIs by offloading long-running tasks to worker QThreads in PyQt.">
<link href="https://cdn.realpython.com/static/favicon.68cbf4197b0c.png" rel="icon">
<link href="https://realpython.com/atom.xml" rel="alternate" title="Real Python" type="application/atom+xml">
<link rel="manifest" href="/manifest.json">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35184939-1', 'auto', {'allowLinker': true});

  
    ga('set', 'anonymizeIp', true);
  

  

  
  
  ga('set', {
    dimension1: false,
    dimension2: false
  });
  

  ga('send', 'pageview');
  
</script>
<script async src='/cdn-cgi/challenge-platform/h/b/scripts/invisible.js'></script></head>
<body>
<nav class="navbar fixed-top navbar-expand-lg navbar-dark flex-column ">
<div class="container flex-row">
<a class="navbar-brand" href="/">
<img src="https://cdn.realpython.com/static/real-python-logo.893c30edea53.svg" width="165" height="40" class="d-inline-block align-top" alt="Real Python">
</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse navbar-nav-scroll" id="navbarSupportedContent" role="navigation" aria-label="Main Navigation">
<ul class="navbar-nav mr-2 flex-fill">
<li class="nav-item">
<a class="nav-link" href="/start-here/">Start&nbsp;Here</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownLibrary" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
<span class="fa fa-graduation-cap" aria-hidden="true"></span> Learn Python
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownLibrary">
<a class="dropdown-item" href="/" style="color: #ff7e73; line-height: 110%;"><i class="fa fa-fw mr-1 fa-graduation-cap" aria-hidden="true"></i> Python Tutorials →<br><small class="text-secondary">In-depth articles and tutorials</small></a>
<a class="dropdown-item" href="/courses/" style="color: #abe5b1; line-height: 110%;"><i class="fa fa-fw mr-1 fa-film" aria-hidden="true"></i> Video Courses →<br><small class="text-secondary">Step-by-step video lessons</small></a>
<a class="dropdown-item" href="/quizzes/" style="color: #abe0e5; line-height: 110%;"><i class="fa fa-fw mr-1 fa-trophy" aria-hidden="true"></i> Quizzes →<br><small class="text-secondary">Check your learning progress</small></a>
<a class="dropdown-item" href="/learning-paths/" style="color: #ffc873; line-height: 110%;"><i class="fa fa-fw mr-1 fa-map-o" aria-hidden="true"></i> Learning Paths →<br><small class="text-secondary">Guided study plans for accelerated learning</small></a>
<a class="dropdown-item" href="/community/" style="color: #e5c6ab; line-height: 110%;"><i class="fa fa-fw mr-1 fa-slack" aria-hidden="true"></i> Community →<br><small class="text-secondary">Learn with other Pythonistas</small></a>
<a class="dropdown-item pb-3" href="/tutorials/all/" style="color: #b8abe5; line-height: 110%;"><i class="fa fa-fw mr-1 fa-tags" aria-hidden="true"></i> Topics →<br><small class="text-secondary">Focus on a specific area or skill level</small></a>
<a class="dropdown-item border-top" href="/account/join/"><i class="fa fa-fw fa-star text-warning" aria-hidden="true"></i> Unlock All Content</a>
</div>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownBooksCourses" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Store
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownBooksCourses">
<a class="dropdown-item" href="/account/join/"><i class="fa fa-fw fa-star text-warning" aria-hidden="true"></i> RP Membership</a>
<a class="dropdown-item" href="/products/python-basics-book/">Python Basics Book</a>
<a class="dropdown-item" href="/products/python-tricks-book/">Python Tricks Book</a>
<a class="dropdown-item" href="/products/cpython-internals-book/">CPython Internals Book</a>
<a class="dropdown-item" href="/products/real-python-course/">The Real Python Course</a>
<a class="dropdown-item" href="/products/managing-python-dependencies/">Managing Python Dependencies</a>
<a class="dropdown-item" href="/products/sublime-python/">Sublime Text + Python Setup</a>
<a class="dropdown-item" href="/products/pythonic-wallpapers/">Pythonic Wallpapers Pack</a>
<a class="dropdown-item" href="https://nerdlettering.com" target="_blank">Python Mugs, T-Shirts, and More</a>
<a class="dropdown-item" href="https://www.pythonistacafe.com" target="_blank">Pythonista Cafe Community</a>
<a class="dropdown-item border-top" href="/products/">Browse All »</a>
</div>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMore" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
More
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMore">
<a class="dropdown-item" href="/newsletter/">Python Newsletter</a>
<a class="dropdown-item" href="/podcasts/rpp/">Python Podcast</a>
<a class="dropdown-item" href="https://www.pythonjobshq.com" target="_blank">Python Job Board</a>
<a class="dropdown-item" href="/team/">Meet the Team</a>
<a class="dropdown-item" href="/write-for-us/">Become a Tutorial Author</a>
<a class="dropdown-item" href="/become-an-instructor/">Become a Video Instructor</a>
</div>
</li>
</ul>
<div class="d-block d-xl-none">
<ul class="navbar-nav">
<li class="nav-item">
<a class="nav-link" href="/search" title="Search"><span class="d-block d-lg-none"><i class="fa fa-search" aria-hidden="true"></i> Search</span><span class="d-none d-lg-block"><i class="fa fa-search" aria-hidden="true"></i></span></a>
</li>
</ul>
</div>
<div class="d-none d-xl-flex align-items-center mr-2">
<form class="form-inline" action="/search" method="GET">
<a class="js-search-form-submit position-absolute" href="/search" title="Search"><i class="fa fa-search fa-fw text-muted pl-2" aria-hidden="true"></i></a>
<input class="search-field form-control form-control-md mr-sm-1 mr-lg-2 w-100" style="padding-left: 2rem;" maxlength=50 type="search" placeholder="Search" aria-label="Search" name="q">
<input type="hidden" name="_from" value="nav">
</form>
</div>
<ul class="navbar-nav">
<li class="nav-item form-inline">
<a class="ml-2 ml-lg-0 btn btn-sm btn-primary px-3" href="/account/join/">Join</a>
</li>
<li class="nav-item">
<a class="btn text-light" href="/account/login/?next=%2Fpython-pyqt-qthread%2F">Sign&#8209;In</a>
</li>
</ul>
</div>
</div>
</nav>
<div class="container main-content">
<div class="row justify-content-center">
<div class="col-md-11 col-lg-8 article with-headerlinks">
<figure class="embed-responsive embed-responsive-16by9">
<img class="card-img-top m-0 p-0 embed-responsive-item rounded" style="object-fit: contain;" alt="Use PyQt&#x27;s QThread to Prevent Freezing GUIs" src="https://files.realpython.com/media/Using-Threads-in-PyQt_Watermarked.4976dbadca32.jpg" width="1920" height="1080" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Using-Threads-in-PyQt_Watermarked.4976dbadca32.jpg&amp;w=480&amp;sig=294dd358d4e0266a75d35f4cc17fcea606aae2a8 480w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Using-Threads-in-PyQt_Watermarked.4976dbadca32.jpg&amp;w=960&amp;sig=5b841624cfe8cb5615109eba445f355fa002ac18 960w, https://files.realpython.com/media/Using-Threads-in-PyQt_Watermarked.4976dbadca32.jpg 1920w" sizes="75vw">
</figure>
<h1>Use PyQt&#x27;s QThread to Prevent Freezing GUIs</h1>
<div class="mb-0">
<span class="text-muted">by <a class="text-muted" href="#author">Leodanis Pozo Ramos</a>
<span class="ml-2 fa fa-clock-o"></span> Dec 21, 2020
<span class="ml-2 mr-1 fa fa-comments"></span><a class="text-muted" href="#reader-comments"><span class="disqus-comment-count" data-disqus-identifier="https://realpython.com/python-pyqt-qthread/"></span></a>
<span class="ml-2 fa fa-tags" aria-hidden="true"></span>
<a href="/tutorials/gui/" class="badge badge-light text-muted">gui</a>
<a href="/tutorials/intermediate/" class="badge badge-light text-muted">intermediate</a>
<div class="d-sm-flex flex-row justify-content-between my-3 text-center">
<div class="jsCompletionStatusWidget btn-group mb-0">
<button title="Click to mark as completed" class="jsBtnCompletion btn btn-secondary border-right " style="border-top-right-radius: 0; border-bottom-right-radius: 0;" disabled>Mark as Completed</button>
<button title="Add bookmark" class="jsBtnBookmark btn btn-secondary border-left" disabled><i class="fa fa-fw fa-bookmark-o"></i></button>
</div>
<div class="align-self-center my-2">
<span>
<a target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet/?text=Check out this %23Python tutorial: Use%20PyQt%27s%20QThread%20to%20Prevent%20Freezing%20GUIs by @realpython&url=https%3A//realpython.com/python-pyqt-qthread/" class="mr-1 badge badge-twitter text-light mb-1"><i class="mr-1 fa fa-twitter text-light"></i>Tweet</a>
<a target="_blank" rel="nofollow" href="https://facebook.com/sharer/sharer.php?u=https%3A//realpython.com/python-pyqt-qthread/" class="mr-1 badge badge-facebook text-light mb-1"><i class="mr-1 fa fa-facebook text-light"></i>Share</a>
<a target="_blank" rel="nofollow" href="mailto:?subject=Python article for you&body=Check out this Python tutorial:%0A%0AUse%20PyQt%27s%20QThread%20to%20Prevent%20Freezing%20GUIs%0A%0Ahttps%3A//realpython.com/python-pyqt-qthread/" class="badge badge-red text-light mb-1"><i class="mr-1 fa fa-envelope text-light"></i>Email</a>
</span>
</div>
</div>
</div>
<div class="article-body">
<div class="bg-light sidebar-module sidebar-module-inset" id="toc">
<p class="h3 mb-2 text-muted">Table of Contents</p>
<div class="toc">
<ul>
<li><a href="#freezing-a-gui-with-long-running-tasks">Freezing a GUI With Long-Running Tasks</a></li>
<li><a href="#multithreading-the-basics">Multithreading: The Basics</a></li>
<li><a href="#multithreading-in-pyqt-with-qthread">Multithreading in PyQt With QThread</a><ul>
<li><a href="#the-main-thread">The Main Thread</a></li>
<li><a href="#worker-threads">Worker Threads</a></li>
</ul>
</li>
<li><a href="#using-qthread-vs-pythons-threading">Using QThread vs Python&rsquo;s threading</a></li>
<li><a href="#using-qthread-to-prevent-freezing-guis">Using QThread to Prevent Freezing GUIs</a></li>
<li><a href="#reusing-threads-qrunnable-and-qthreadpool">Reusing Threads: QRunnable and QThreadPool</a></li>
<li><a href="#communicating-with-worker-qthreads">Communicating With Worker QThreads</a><ul>
<li><a href="#using-signals-and-slots">Using Signals and Slots</a></li>
<li><a href="#sharing-data-between-threads">Sharing Data Between Threads</a></li>
<li><a href="#protecting-shared-data-with-qmutex">Protecting Shared Data With QMutex</a></li>
</ul>
</li>
<li><a href="#multithreading-in-pyqt-best-practices">Multithreading in PyQt: Best Practices</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div class="sidebar-module sidebar-module-inset p-0" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:12.5%;"></div>
<div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div>
</div>
<a class="small text-muted" href="/account/join/" rel="nofollow"> <i class="fa fa-info-circle" aria-hidden="true"> </i> Remove ads</a>
</div>
<p>PyQt graphical user interface (GUI) applications have a <strong>main thread</strong> of execution that runs the <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qcoreapplication.html#the-event-loop-and-event-handling">event loop</a> and GUI. If you launch a <strong>long-running task</strong> in this <a href="https://en.wikipedia.org/wiki/Thread_(computing)">thread</a>, then your GUI will freeze until the task terminates. During that time, the user won&rsquo;t be able to interact with the application, resulting in a bad user experience. Luckily, PyQt&rsquo;s <strong><code>QThread</code></strong> class allows you to work around this issue.</p>
<p><strong>In this tutorial, you&rsquo;ll learn how to:</strong></p>
<ul>
<li>Use PyQt&rsquo;s <strong><code>QThread</code></strong> to prevent freezing GUIs</li>
<li>Create <strong>reusable threads</strong> with <code>QThreadPool</code> and <code>QRunnable</code></li>
<li>Manage <strong>interthread communication</strong> using signals and slots</li>
<li>Safely use <strong>shared resources</strong> with PyQt&rsquo;s locks</li>
<li>Use <strong>best practices</strong> for developing GUI applications with PyQt&rsquo;s thread support</li>
</ul>
<p>For a better understanding of how to use PyQt&rsquo;s threads, some previous knowledge of <a href="https://realpython.com/python-pyqt-gui-calculator/">GUI programming with PyQt</a> and <a href="https://realpython.com/intro-to-python-threading/">Python multithreaded programming</a> would be helpful.</p>
<div class="alert alert-warning" role="alert">
<p><strong markdown="1">Free Bonus:</strong> <a href="https://realpython.com/bonus/python-basics-sample-free-chapter/" class="alert-link" data-toggle="modal" data-target="#modal-python-basics-sample-free-chapter" data-focus="false" markdown="1">Get a sample chapter from Python Basics: A Practical Introduction to Python 3</a> to see how you can go from beginner to intermediate in Python with a complete curriculum, up to date for Python 3.9.</p>
</div>
<section class="section2" id="freezing-a-gui-with-long-running-tasks"><h2>Freezing a GUI With Long-Running Tasks<a class="headerlink" href="#freezing-a-gui-with-long-running-tasks" title="Permanent link"></a></h2>
<p>Long-running tasks occupying the main thread of a GUI application and causing the application to freeze is a common issue in GUI programming that almost always results in a bad user experience. For example, consider the following GUI application:</p>
<figure class="js-lightbox"><a href="https://files.realpython.com/media/pyqt-freezing-gui.1a899db536e8.png" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block " src="https://files.realpython.com/media/pyqt-freezing-gui.1a899db536e8.png" width="302" height="175" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/pyqt-freezing-gui.1a899db536e8.png&amp;w=75&amp;sig=068e3bc2b135a6ea1137745633693b0badcd042f 75w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/pyqt-freezing-gui.1a899db536e8.png&amp;w=151&amp;sig=ee793c37ccd144b49e047c1e828dad1983782bc4 151w, https://files.realpython.com/media/pyqt-freezing-gui.1a899db536e8.png 302w" sizes="75vw" alt="PyQt Freezing GUI Example" data-asset="3250" /></a></figure>
<p>Say you need the <em>Counting</em> label to reflect the total number of clicks on the <em>Click me!</em> button. Clicking the <em>Long-Running Task!</em> button will launch a task that takes a lot of time to finish. Your long-running task could be a file download, a query to a large database, or any other resource-intensive operation.</p>
<p>Here&rsquo;s a first approach to coding this application using PyQt and a single thread of execution:</p>
<div class="highlight python"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">Qt</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">QApplication</span><span class="p">,</span>
    <span class="n">QLabel</span><span class="p">,</span>
    <span class="n">QMainWindow</span><span class="p">,</span>
    <span class="n">QPushButton</span><span class="p">,</span>
    <span class="n">QVBoxLayout</span><span class="p">,</span>
    <span class="n">QWidget</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">class</span> <span class="nc">Window</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clicksCount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Freezing GUI&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centralWidget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">centralWidget</span><span class="p">)</span>
        <span class="c1"># Create and connect widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clicksLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Counting: 0 clicks&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clicksLabel</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignHCenter</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stepLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Long-Running Step: 0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stepLabel</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignHCenter</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">countBtn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Click me!&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">countBtn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">countClicks</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">longRunningBtn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Long-Running Task!&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">longRunningBtn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">runLongTask</span><span class="p">)</span>
        <span class="c1"># Set the layout</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clicksLabel</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">countBtn</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stepLabel</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">longRunningBtn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centralWidget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">countClicks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clicksCount</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clicksLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Counting: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">clicksCount</span><span class="si">}</span><span class="s2"> clicks&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reportProgress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stepLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Long-Running Step: </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">runLongTask</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Long-running task in 5 steps.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reportProgress</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">Window</span><span class="p">()</span>
<span class="n">win</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec</span><span class="p">())</span>
</code></pre></div>
<p>In this Freezing GUI application, <code>.setupUi()</code> creates all the required graphical components for the GUI. A click on the <em>Click me!</em> button calls <code>.countClicks()</code>, which makes the text of the <em>Counting</em> label reflect the number of button clicks.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> PyQt was first developed to target Python 2, which has an <code>exec</code> keyword. To avoid a name conflict on those earlier versions of PyQt, an underscore was added to the end of <code>.exec_()</code>.</p>
<p>Even though PyQt5 targets only Python 3, which doesn&rsquo;t have an <code>exec</code> keyword, the library provides two methods to start an application&rsquo;s event loop:</p>
<ol>
<li><code>.exec_()</code></li>
<li><code>.exec()</code></li>
</ol>
<p>Both variations of the method work the same, so you can use either one in your applications.</p>
</div>
<p>Clicking the <em>Long-Running Task!</em> button calls <code>.runLongTask()</code>, which performs a task that takes <code>5</code> seconds to complete. This is a hypothetical task that you coded using <a href="https://realpython.com/python-sleep/"><code>time.sleep(secs)</code></a>, which suspends the execution of the calling thread for the given number of seconds, <code>secs</code>.</p>
<p>In <code>.runLongTask()</code>, you also call <code>.reportProgress()</code> to make the <em>Long-Running Step</em> label reflect the progress of the operation.</p>
<p>Does this application work as you intend? <a href="https://realpython.com/run-python-scripts/">Run the application</a> and check out its behavior:</p>
<figure class="js-lightbox"><a href="https://files.realpython.com/media/pyqt-freezing-gui-animation.03895ab5576e.gif" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block " src="https://files.realpython.com/media/pyqt-freezing-gui-animation.03895ab5576e.gif" width="325" height="202" srcset="https://files.realpython.com/media/pyqt-freezing-gui-animation.03895ab5576e.gif 81w, https://files.realpython.com/media/pyqt-freezing-gui-animation.03895ab5576e.gif 162w, https://files.realpython.com/media/pyqt-freezing-gui-animation.03895ab5576e.gif 325w" sizes="75vw" alt="PyQt Freezing GUI Example" data-asset="3251" /></a></figure>
<p>When you click the <em>Click me!</em> button, the label shows the number of clicks. However, if you click the <em>Long-Running Task!</em> button, then the application becomes frozen and unresponsive. The buttons no longer respond to clicks and the labels don&rsquo;t reflect the application&rsquo;s state.</p>
<p>After five seconds, the application&rsquo;s GUI gets updated again. The <em>Counting</em> label shows ten clicks, reflecting five clicks that occurred while the GUI was frozen. The <em>Long-Running Step</em> label doesn&rsquo;t reflect the progress of your long-running operation. It jumps from zero to five without showing the intermediate steps.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> Even though your application&rsquo;s GUI freezes during the long-running task, the application still registers events such as clicks and keystrokes. It&rsquo;s just unable to process them until the main thread gets released.</p>
</div>
<p>The application&rsquo;s GUI freezes as a result of a blocked main thread. The main thread is busy processing a long-running task and doesn&rsquo;t immediately respond to the user&rsquo;s actions. This is an annoying behavior because the user doesn&rsquo;t know for sure if the application is working correctly or if it&rsquo;s crashed.</p>
<p>Fortunately, there are some techniques you can use to work around this issue. A commonly used solution is to run your long-running task outside of the application&rsquo;s main thread using a <strong>worker thread</strong>.</p>
<p>In the sections below, you&rsquo;ll learn how to use PyQt&rsquo;s built-in thread support to solve the issue of unresponsive or frozen GUIs and provide the best possible user experience in your applications.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div></div><a class="small text-muted" href="/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section><section class="section2" id="multithreading-the-basics"><h2>Multithreading: The Basics<a class="headerlink" href="#multithreading-the-basics" title="Permanent link"></a></h2>
<p>Sometimes you can divide your programs into several smaller <strong>subprograms</strong>, or <strong>tasks</strong>, that you can run in several threads. This might make your programs faster, or it might help you improve the user experience by preventing your programs from freezing while executing long-running tasks.</p>
<p>A <strong>thread</strong> is a separate flow of execution. In most operating systems, a thread is a component of a <a href="https://en.wikipedia.org/wiki/Process_(computing)">process</a>, and processes can have multiple threads executing <a href="https://en.wikipedia.org/wiki/Concurrent_computing">concurrently</a>. Each process represents an instance of a program or application that is currently running in a given computer system.</p>
<p>You can have as many threads as you need. The challenge is determining the right number of threads to use. If you&rsquo;re working with <a href="https://en.wikipedia.org/wiki/I/O_bound">I/O-bound</a> threads, then the number of threads will be limited by your available system resources. On the other hand, if you&rsquo;re working with <a href="https://en.wikipedia.org/wiki/CPU-bound">CPU-bound</a> threads, then you&rsquo;ll benefit from having a number of threads that is equal to or less than the number of CPU cores in your system.</p>
<p>Building programs that are capable of running multiple tasks using different threads is a programming technique known as <strong>multithreaded programming</strong>. Ideally, with this technique, several tasks run independently at the same time. However, this isn&rsquo;t always possible. There are at least two elements that can prevent a program from running several threads in parallel:</p>
<ol>
<li>The central processing unit (<a href="https://en.wikipedia.org/wiki/Central_processing_unit">CPU</a>)</li>
<li>The programming language</li>
</ol>
<p>For example, if you have a <a href="https://en.wikipedia.org/wiki/Single-core">single-core CPU</a> machine, then you can&rsquo;t run multiple threads at the same time. However, some single-core CPUs can simulate parallel thread execution by allowing the operating system to <a href="https://en.wikipedia.org/wiki/Scheduling_(computing)">schedule</a> the processing time between multiple threads. This makes your threads appear to run in parallel even though they&rsquo;re really running one at a time.</p>
<p>On the other hand, if you have a <a href="https://en.wikipedia.org/wiki/Multi-core_processor">multi-core CPU</a> machine or a <a href="https://en.wikipedia.org/wiki/Computer_cluster">computer cluster</a>, then you might be able to run multiple threads at the same time. In this case, your programming language becomes an important factor.</p>
<p>Some programming languages have internal components that actually prohibit the real execution of multiple threads in parallel. In these cases, threads just appear to run in parallel because they take advantage of the task scheduling system.</p>
<p>Multithreaded programs are usually more difficult to write, maintain, and debug than <a href="https://en.wikipedia.org/wiki/Thread_(computing)#Single_threading">single-threaded</a> programs because of the complexity related to sharing resources between threads, <a href="https://en.wikipedia.org/wiki/Synchronization_(computer_science)">synchronizing</a> data access, and coordinating thread execution. This can cause several problems:</p>
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Race_condition">Race condition</a> is when the application&rsquo;s behavior becomes nondeterministic due to the unpredictable order of events. It&rsquo;s often the result of two or more threads accessing a shared resource without proper synchronization. For example, reading and writing memory from different threads can lead to a race condition if the reading and writing operations are performed in the wrong order.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Deadlock">Deadlock</a> happens when threads wait indefinitely for a locked resource to be freed. For example, if a thread locks a resource and doesn&rsquo;t unlock it after use, then other threads won&rsquo;t be able to use that resource and will wait indefinitely. Deadlocks can also happen if thread A is waiting for thread B to unlock a resource, and thread B is waiting for thread A to unlock a different resource. Both threads will end up waiting forever.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Deadlock#Livelock">Livelock</a> is a situation in which two or more threads repeatedly act in response to each other&rsquo;s actions. Livelocked threads are unable to make further progress on their specific task because they&rsquo;re too busy responding to each other. However, they&rsquo;re not blocked or dead.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Starvation_(computer_science)">Starvation</a> happens when a process never gains access to the resources it needs for finishing its work. For example, if you have a process that can&rsquo;t gain CPU time access, then the process is starving for CPU time and can&rsquo;t do its work.</p>
</li>
</ul>
<p>When building multithreaded applications, you need to be careful to protect your resources from concurrent writing or state modification access. In other words, you need to prevent multiple threads from accessing a given resource at the same time.</p>
<p>A wide range of applications can benefit from using multithreaded programming in at least three ways:</p>
<ol>
<li>Making your applications faster by taking advantage of multi-core processors</li>
<li>Simplifying the application structure by dividing it into smaller subtasks</li>
<li>Keeping your application responsive and up to date by offloading long-running tasks to worker threads</li>
</ol>
<p>In <a href="https://docs.python.org/3/reference/introduction.html#alternate-implementations">Python&rsquo;s C implementation</a>, also known as <strong>CPython</strong>, threads don&rsquo;t run in parallel. CPython has a <a href="https://realpython.com/python-gil/">global interpreter lock (GIL)</a>, which is a <a href="https://en.wikipedia.org/wiki/Lock_(computer_science)">lock</a> that basically allows only one Python thread to run at a time. </p>
<p>This can negatively affect the performance of threaded Python applications because of the overhead that results from the <a href="https://en.wikipedia.org/wiki/Context_switch">context switching</a> between threads. However, multithreading in Python can help you solve the problem of freezing or unresponsive applications while processing long-running tasks.</p>
</section><section class="section2" id="multithreading-in-pyqt-with-qthread"><h2>Multithreading in PyQt With <code>QThread</code><a class="headerlink" href="#multithreading-in-pyqt-with-qthread" title="Permanent link"></a></h2>
<p><a href="https://doc.qt.io/">Qt</a>, and therefore <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/">PyQt</a>, provides its own infrastructure to create multithreaded applications using <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#"><code>QThread</code></a>. PyQt applications can have two different kinds of threads:</p>
<ol>
<li>Main thread</li>
<li>Worker threads</li>
</ol>
<p>The application&rsquo;s main thread always exists. This is where the application and its GUI run. On the other hand, the existence of <strong>worker threads</strong> depends on the application&rsquo;s processing needs. For example, if your application commonly runs heavy tasks that take a lot of time to finish, then you might want to have worker threads to run those tasks and avoid freezing the application&rsquo;s GUI.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div></div><a class="small text-muted" href="/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><section class="section3" id="the-main-thread"><h3>The Main Thread<a class="headerlink" href="#the-main-thread" title="Permanent link"></a></h3>
<p>In PyQt applications, the main thread of execution is also known as the <strong>GUI thread</strong> because it handles all widgets and other GUI components. You start this thread by calling <code>.exec()</code> on your <code>QApplication</code> object. The main thread runs the application&rsquo;s <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qcoreapplication.html#the-event-loop-and-event-handling">event loop</a> and also your Python code. It also handles your windows, dialogs, and communication with the host operating system.</p>
<p>By default, any event or task that takes place in the application&rsquo;s main thread, including the user&rsquo;s events on the GUI itself, will run <strong>synchronously</strong>, or one task after another. So, if you start a long-running task in the main thread, then the application needs to wait for that task to finish, and the GUI becomes unresponsive.</p>
<p>It&rsquo;s important to note that you must create and update all your widgets in the GUI thread. However, you can execute other long-running tasks in worker threads and use their results to feed the GUI components of your application. This means that GUI components will act as consumers that are fed information from the threads performing the actual work.</p>
</section><section class="section3" id="worker-threads"><h3>Worker Threads<a class="headerlink" href="#worker-threads" title="Permanent link"></a></h3>
<p>You can create as many worker threads as you need in your PyQt applications. Worker threads are secondary threads of execution that you can use to offload long-running tasks from the main thread and prevent GUI freezing.</p>
<p>You can create worker threads using <code>QThread</code>. Each worker thread can have its own event loop and support PyQt&rsquo;s <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/signals_slots.html">signals and slots mechanism</a> to communicate with the main thread. If you create an object from any class that inherits from <a href="https://doc.qt.io/qt-5/qobject.html"><code>QObject</code></a> in a particular thread, then that object is said to <strong>belong to</strong>, or have an <strong>affinity to</strong>, that thread. Its children must also belong to the same thread.</p>
<p><code>QThread</code> isn&rsquo;t a thread itself. It&rsquo;s a wrapper around an operating system thread. The real thread object is created when you call <a href="https://doc.qt.io/qt-5/qthread.html#start"><code>QThread.start()</code></a>. </p>
<p><code>QThread</code> provides a high-level application programming interface (<a href="https://en.wikipedia.org/wiki/API">API</a>) to manage threads. This API includes signals, such as <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#started"><code>.started()</code></a> and <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#finished"><code>.finished()</code></a>, that are emitted when the thread starts and finishes. It also includes methods and slots, such as <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#start"><code>.start()</code></a>, <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#wait"><code>.wait()</code></a>, <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#exit"><code>.exit()</code></a>, <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#quit"><code>.quit()</code></a>, <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#isFinished"><code>.isFinished()</code></a>, and <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#isRunning"><code>.isRunning()</code></a>.</p>
<p>Like with any other threading solutions, with <code>QThread</code> you must protect your data and resources from <strong>concurrent</strong>, or simultaneous, access. Otherwise you&rsquo;ll face a lot of problems, including deadlocks, data corruption, and so on.</p>
</section></section><section class="section2" id="using-qthread-vs-pythons-threading"><h2>Using <code>QThread</code> vs Python&rsquo;s <code>threading</code><a class="headerlink" href="#using-qthread-vs-pythons-threading" title="Permanent link"></a></h2>
<p>When it comes to <a href="https://realpython.com/intro-to-python-threading/">working with threads in Python</a>, you&rsquo;ll find that the Python <a href="https://docs.python.org/3/library/index.html">standard library</a> offers a consistent and robust solution with the <a href="https://docs.python.org/3/library/threading.html#module-threading"><code>threading</code></a> module. This module provides a high-level API for doing multithreaded programming in Python.</p>
<p>Normally, you&rsquo;ll use <code>threading</code> in your Python applications. However, if you&rsquo;re using PyQt to build GUI applications with Python, then you have another option. PyQt provides a complete, fully integrated, high-level API for doing multithreading.</p>
<p>You might be wondering, What should I use in my PyQt applications, Python&rsquo;s thread support or PyQt&rsquo;s thread support? The answer is that it depends.</p>
<p>For example, if you&rsquo;re building a GUI application that will also have a <a href="https://realpython.com/python-web-applications/">web version</a>, then Python&rsquo;s threads might make more sense because your back end won&rsquo;t depend on PyQt at all. However, if you&rsquo;re building bare PyQt applications, then PyQt&rsquo;s threads are for you.</p>
<p>Using PyQt&rsquo;s thread support provides the following benefits:</p>
<ul>
<li><strong>Thread-related classes</strong> are fully integrated with the rest of PyQt infrastructure.</li>
<li><strong>Worker threads</strong> can have their own event loop, which enables event handling.</li>
<li><strong>Interthread communication</strong> is possible using signals and slots.</li>
</ul>
<p>A rule of thumb might be to use PyQt&rsquo;s thread support if you&rsquo;re going to interact with the rest of the library, and use Python&rsquo;s thread support otherwise.</p>
</section><section class="section2" id="using-qthread-to-prevent-freezing-guis"><h2>Using <code>QThread</code> to Prevent Freezing GUIs<a class="headerlink" href="#using-qthread-to-prevent-freezing-guis" title="Permanent link"></a></h2>
<p>A common use for threads in a GUI application is to offload long-running tasks to worker threads so that the GUI remains responsive to the user&rsquo;s interactions. In PyQt, you use <a href="https://doc.qt.io/qt-5/qthread.html"><code>QThread</code></a> to create and manage worker threads.</p>
<p>According to Qt&rsquo;s documentation, there are <a href="https://doc.qt.io/qt-5/threads-technologies.html#qthread-low-level-api-with-optional-event-loops">two main ways</a> to create worker threads with <code>QThread</code>:</p>
<ol>
<li>Instantiate <code>QThread</code> directly and create a worker <code>QObject</code>, then call <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qobject.html#moveToThread"><code>.moveToThread()</code></a> on the worker using the thread as an argument. The worker must contain all the required functionality to execute a specific task.</li>
<li>Subclass <code>QThread</code> and reimplement <code>.run()</code>. The implementation of <code>.run()</code> must contain all the required functionality to execute a specific task.</li>
</ol>
<p>Instantiating a <code>QThread</code> provides a parallel event loop. An event loop allows objects owned by the thread to receive signals on their slots, and these slots will be executed within the thread. Subclassing <code>QThread</code> allows the application to run parallel code without an event loop.</p>
<p>There&rsquo;s <a href="http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/">some debate in the Qt community</a> around which of these approaches is best for creating worker threads. However, the first approach is what <a href="https://www.qt.io/blog/2010/06/17/youre-doing-it-wrong">Qt&rsquo;s community and maintainers recommend</a>.</p>
<p>The first approach for creating worker threads requires the following steps:</p>
<ol>
<li>Prepare a worker object by subclassing <code>QObject</code> and put your long-running task in it.</li>
<li>Create a new instance of the worker class.</li>
<li>Create a new <code>QThread</code> instance.</li>
<li>Move the worker object into the newly created thread by calling <code>.moveToThread(thread)</code>.</li>
<li>Connect the required signals and slots to guarantee interthread communication.</li>
<li>Call <code>.start()</code> on the <code>QThread</code> object.</li>
</ol>
<p>You can turn your Freezing GUI application into a Responsive GUI application using these steps:</p>
<div class="highlight python"><pre><span></span><code><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QObject</span><span class="p">,</span> <span class="n">QThread</span><span class="p">,</span> <span class="n">pyqtSignal</span>
<span class="c1"># Snip...</span>

<span class="c1"># Step 1: Create a worker class</span>
<span class="k">class</span> <span class="nc">Worker</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="n">finished</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">progress</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Long-running task.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Window</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="c1"># Snip...</span>
    <span class="k">def</span> <span class="nf">runLongTask</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Step 2: Create a QThread object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">()</span>
        <span class="c1"># Step 3: Create a worker object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span> <span class="o">=</span> <span class="n">Worker</span><span class="p">()</span>
        <span class="c1"># Step 4: Move worker to the thread</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="p">)</span>
        <span class="c1"># Step 5: Connect signals and slots</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="o">.</span><span class="n">started</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">run</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">progress</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reportProgress</span><span class="p">)</span>
        <span class="c1"># Step 6: Start the thread</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="c1"># Final resets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">longRunningBtn</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">longRunningBtn</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">stepLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Long-Running Step: 0&quot;</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div>
<p>First, you do some required <a href="https://realpython.com/python-import/">imports</a>. Then you run the steps that you saw before. </p>
<p>In step 1, you create <code>Worker</code>, a subclass of <code>QObject</code>. In <code>Worker</code>, you create two signals, <code>finished</code> and <code>progress</code>. Note that you must create signals as <a href="https://realpython.com/python3-object-oriented-programming/#class-and-instance-attributes">class attributes</a>.</p>
<p>You also create a method called <code>.runLongTask()</code>, where you put all the required code to perform your long-running task. In this example, you simulate a long-running task using a <a href="https://realpython.com/python-for-loop/"><code>for</code> loop</a> that iterates <code>5</code> times, with a one-second delay in each iteration. The loop also emits the <code>progress</code> signal, which indicates the operation&rsquo;s progress. Finally, <code>.runLongTask()</code> emits the <code>finished</code> signal to point out that the processing has finished.</p>
<p>In steps 2 to 4, you create an instance of <code>QThread</code>, which will provide the space for running this task, as well as an instance of <code>Worker</code>. You move your worker object to the thread by calling <code>.moveToThread()</code> on <code>worker</code>, using <code>thread</code> as an argument.</p>
<p>In step 5, you connect the following signals and slots:</p>
<ul>
<li>
<p>The thread&rsquo;s <code>started</code> signal to the worker&rsquo;s <code>.runLongTask()</code> slot to ensure that when you start the thread, <code>.runLongTask()</code> will be called automatically</p>
</li>
<li>
<p>The worker&rsquo;s <code>finished</code> signal to the thread&rsquo;s <code>.quit()</code> slot to quit <code>thread</code> when <code>worker</code> finishes its work</p>
</li>
<li>
<p>The <code>finished</code> signal to the <code>.deleteLater()</code> slot in both objects to delete the worker and the thread objects when the work is done</p>
</li>
</ul>
<p>Finally, in step 6, you start the thread using <code>.start()</code>. </p>
<p>Once you have the thread running, you do some resets to make the application behave coherently. You disable the <em>Long-Running Task!</em> button to prevent the user from clicking it while the task is running. You also connect the thread&rsquo;s <code>finished</code> signal with a <a href="https://realpython.com/python-lambda/"><code>lambda</code> function</a> that enables the <em>Long-Running Task!</em> button when the thread finishes. Your final connection resets the text of the <em>Long-Running Step</em> label.</p>
<p>If you run this application, then you&rsquo;ll get the following window on your screen:</p>
<figure class="js-lightbox"><a href="https://files.realpython.com/media/pyqt-responsive-gui-example.32bcb8d1d10d.gif" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block " src="https://files.realpython.com/media/pyqt-responsive-gui-example.32bcb8d1d10d.gif" width="325" height="202" srcset="https://files.realpython.com/media/pyqt-responsive-gui-example.32bcb8d1d10d.gif 81w, https://files.realpython.com/media/pyqt-responsive-gui-example.32bcb8d1d10d.gif 162w, https://files.realpython.com/media/pyqt-responsive-gui-example.32bcb8d1d10d.gif 325w" sizes="75vw" alt="PyQt Responsive GUI Example" data-asset="3252" /></a></figure>
<p>Since you offloaded the long-running task to a worker thread, your application is now fully responsive. That&rsquo;s it! You&rsquo;ve successfully used PyQt&rsquo;s <code>QThread</code> to solve the frozen GUI issue that you saw in previous sections.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div></div><a class="small text-muted" href="/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section><section class="section2" id="reusing-threads-qrunnable-and-qthreadpool"><h2>Reusing Threads: <code>QRunnable</code> and <code>QThreadPool</code><a class="headerlink" href="#reusing-threads-qrunnable-and-qthreadpool" title="Permanent link"></a></h2>
<p>If your GUI applications rely heavily on multithreading, then you&rsquo;ll face significant overhead related to creating and destroying threads. You&rsquo;ll also have to consider how many threads you can start on a given system so that your applications remain efficient. Fortunately, PyQt&rsquo;s thread support provides you with a solution to these issues, too. </p>
<p>Each application has a global <strong>thread pool</strong>. You can get a reference to it by calling <a href="https://doc.qt.io/qt-5/qthreadpool.html#globalInstance"><code>QThreadPool.globalInstance()</code></a>.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> Even though using the default thread pool is a fairly common choice, you can also create your own thread pool by instantiating <a href="https://doc.qt.io/qt-5/qthreadpool.html"><code>QThreadPool</code></a>, which provides a collection of reusable threads.</p>
</div>
<p>The global thread pool maintains and manages a suggested number of threads generally based on the number of cores in your current CPU. It also handles the queuing and execution of tasks in your application&rsquo;s threads. The threads in the pool are reusable, which prevents the overhead associated with creating and destroying threads.</p>
<p>To create tasks and run them in a thread pool, you use <a href="https://doc.qt.io/qt-5/qrunnable.html"><code>QRunnable</code></a>. This class represents a task or piece of code that needs to be run. The process of creating and executing <strong>runnable tasks</strong> involves three steps:</p>
<ol>
<li>Subclass <code>QRunnable</code> and reimplement <a href="https://doc.qt.io/qt-5/qrunnable.html#run"><code>.run()</code></a> with the code for the task that you want to run.</li>
<li>Instantiate the subclass of <code>QRunnable</code> to create a runnable task.</li>
<li>Call <a href="https://doc.qt.io/qt-5/qthreadpool.html#start"><code>QThreadPool.start()</code></a> with the runnable task as an argument.</li>
</ol>
<p><code>.run()</code> must contain the required code for the task at hand. The call to <code>.start()</code> launches your task in one of the available threads in the pool. If there&rsquo;s no available thread, then <code>.start()</code> puts the task in the pool&rsquo;s run queue. When a thread becomes available, the code within <code>.run()</code> gets executed in that thread.</p>
<p>Here&rsquo;s a GUI application that shows how you can implement this process in your code:</p>
<div class="highlight python"><pre><span></span><code><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">logging</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">random</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">time</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QRunnable</span><span class="p">,</span> <span class="n">Qt</span><span class="p">,</span> <span class="n">QThreadPool</span>
<span class="linenos"> 7</span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 8</span>    <span class="n">QApplication</span><span class="p">,</span>
<span class="linenos"> 9</span>    <span class="n">QLabel</span><span class="p">,</span>
<span class="linenos">10</span>    <span class="n">QMainWindow</span><span class="p">,</span>
<span class="linenos">11</span>    <span class="n">QPushButton</span><span class="p">,</span>
<span class="linenos">12</span>    <span class="n">QVBoxLayout</span><span class="p">,</span>
<span class="linenos">13</span>    <span class="n">QWidget</span><span class="p">,</span>
<span class="linenos">14</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="c1"># 1. Subclass QRunnable</span>
<span class="linenos">19</span><span class="k">class</span> <span class="nc">Runnable</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
<span class="linenos">20</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="linenos">21</span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="linenos">22</span>        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">25</span>        <span class="c1"># Your long-running task goes here ...</span>
<span class="linenos">26</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<span class="linenos">27</span>            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Working in thread </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="si">}</span><span class="s2">, step </span><span class="si">{</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">/5&quot;</span><span class="p">)</span>
<span class="linenos">28</span>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">700</span><span class="p">,</span> <span class="mi">2500</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="k">class</span> <span class="nc">Window</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
<span class="linenos">31</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="linenos">32</span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
<span class="linenos">33</span>        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">()</span>
<span class="linenos">34</span>
<span class="linenos">35</span>    <span class="k">def</span> <span class="nf">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">36</span>        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;QThreadPool + QRunnable&quot;</span><span class="p">)</span>
<span class="linenos">37</span>        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
<span class="linenos">38</span>        <span class="bp">self</span><span class="o">.</span><span class="n">centralWidget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
<span class="linenos">39</span>        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">centralWidget</span><span class="p">)</span>
<span class="linenos">40</span>        <span class="c1"># Create and connect widgets</span>
<span class="linenos">41</span>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
<span class="linenos">42</span>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignHCenter</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span><span class="p">)</span>
<span class="linenos">43</span>        <span class="n">countBtn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Click me!&quot;</span><span class="p">)</span>
<span class="linenos">44</span>        <span class="n">countBtn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">runTasks</span><span class="p">)</span>
<span class="linenos">45</span>        <span class="c1"># Set the layout</span>
<span class="linenos">46</span>        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
<span class="linenos">47</span>        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
<span class="linenos">48</span>        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">countBtn</span><span class="p">)</span>
<span class="linenos">49</span>        <span class="bp">self</span><span class="o">.</span><span class="n">centralWidget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
<span class="linenos">50</span>
<span class="linenos">51</span>    <span class="k">def</span> <span class="nf">runTasks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">52</span>        <span class="n">threadCount</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span><span class="o">.</span><span class="n">maxThreadCount</span><span class="p">()</span>
<span class="linenos">53</span>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running </span><span class="si">{</span><span class="n">threadCount</span><span class="si">}</span><span class="s2"> Threads&quot;</span><span class="p">)</span>
<span class="linenos">54</span>        <span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>
<span class="linenos">55</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">threadCount</span><span class="p">):</span>
<span class="linenos">56</span>            <span class="c1"># 2. Instantiate the subclass of QRunnable</span>
<span class="linenos">57</span>            <span class="n">runnable</span> <span class="o">=</span> <span class="n">Runnable</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="linenos">58</span>            <span class="c1"># 3. Call start()</span>
<span class="linenos">59</span>            <span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">runnable</span><span class="p">)</span>
<span class="linenos">60</span>
<span class="linenos">61</span><span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="linenos">62</span><span class="n">window</span> <span class="o">=</span> <span class="n">Window</span><span class="p">()</span>
<span class="linenos">63</span><span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="linenos">64</span><span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec</span><span class="p">())</span>
</code></pre></div>
<p>Here&rsquo;s how this code works:</p>
<ul>
<li><strong>On lines 19 to 28</strong>, you subclass <code>QRunnable</code> and reimplement <code>.run()</code> with the code you want to execute. In this case, you use the usual loop for simulating a long-running task. The call to <a href="https://realpython.com/python-logging/"><code>logging.info()</code></a> notifies you about the operation&rsquo;s progress by printing a message to your terminal screen.</li>
<li><strong>On line 52</strong>, you get the number of available threads. This number will depend on your specific hardware and is normally based on the cores of your CPU.</li>
<li><strong>On line 53</strong>, you update the text of the label to reflect how many threads you can run.</li>
<li><strong>On line 55</strong>, you start a <code>for</code> loop that iterates over the available threads.</li>
<li><strong>On line 57</strong>, you instantiate <code>Runnable</code>, passing the loop variable <code>i</code> as an argument to identify the current thread. Then you call <code>.start()</code> on the thread pool, using your runnable task as an argument.</li>
</ul>
<p>It&rsquo;s important to note that some of the examples in this tutorial use <code>logging.info()</code> with a <a href="https://realpython.com/python-logging/#basic-configurations">basic configuration</a> to print messages to the screen. You need to do this because <a href="https://realpython.com/python-print/#thread-safe-printing"><code>print()</code> isn&rsquo;t a thread-safe function</a>, so using it might cause a mess in your output. Fortunately, the functions in <code>logging</code> are thread safe, so you can use them in multithreaded applications.</p>
<p>If you run this application, then you&rsquo;ll get the following behavior:</p>
<figure class="js-lightbox"><a href="https://files.realpython.com/media/pyqt-qrunnable-example.c7cfe134b404.gif" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block " src="https://files.realpython.com/media/pyqt-qrunnable-example.c7cfe134b404.gif" width="653" height="410" srcset="https://files.realpython.com/media/pyqt-qrunnable-example.c7cfe134b404.gif 163w, https://files.realpython.com/media/pyqt-qrunnable-example.c7cfe134b404.gif 326w, https://files.realpython.com/media/pyqt-qrunnable-example.c7cfe134b404.gif 653w" sizes="75vw" alt="PyQt QRunnable Example" data-asset="3253" /></a></figure>
<p>When you click the <em>Click me!</em> button, the application launches up to four threads. In the background terminal, the application reports the progress of each thread. If you close the application, then the threads will continue running until they finish their respective tasks.</p>
<p>There&rsquo;s no way of stopping a <code>QRunnable</code> object from the outside in Python. To work around this, you can create a global <a href="https://realpython.com/python-boolean/">Boolean variable</a> and systematically check it from inside your <code>QRunnable</code> subclasses to terminate them when your variable becomes <code>True</code>.</p>
<p>Another drawback of using <code>QThreadPool</code> and <code>QRunnable</code> is that <code>QRunnable</code> doesn&rsquo;t support signals and slots, so interthread communication can be challenging.</p>
<p>On the other hand, <code>QThreadPool</code> automatically manages a thread pool and handles the queuing and execution of runnable tasks in those threads. The threads in the pool are reusable, which helps reduce your application&rsquo;s overhead.</p>
</section><section class="section2" id="communicating-with-worker-qthreads"><h2>Communicating With Worker QThreads<a class="headerlink" href="#communicating-with-worker-qthreads" title="Permanent link"></a></h2>
<p>If you&rsquo;re doing multithreaded programming with PyQt, then you might need to establish <strong>communication</strong> between your application&rsquo;s main thread and your worker threads. This allows you to get feedback on the progress of worker threads and update the GUI accordingly, send data to your threads, allow the users to interrupt the execution, and so on.</p>
<p>PyQt&rsquo;s signals and slots mechanism provides a robust and safe way of communicating with worker threads in a GUI application.</p>
<p>On the other hand, you might also need to establish communication between worker threads, such as sharing buffers of data or any other kind of resource. In this case, you need to make sure that you&rsquo;re properly protecting your data and resources from concurrent access.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div></div><a class="small text-muted" href="/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><section class="section3" id="using-signals-and-slots"><h3>Using Signals and Slots<a class="headerlink" href="#using-signals-and-slots" title="Permanent link"></a></h3>
<p>A <a href="https://en.wikipedia.org/wiki/Thread_safety">thread-safe</a> object is an object that can be accessed concurrently by multiple threads and is guaranteed to be in a valid state. PyQt&rsquo;s signals and slots are thread safe, so you can use them to establish interthread communication as well as to share data between threads.</p>
<p>You can connect signals emitted from a thread to slots within the thread or within a different thread. This means that you can execute code in a thread as a response to a signal emitted in the same thread or in another thread. This establishes a safe bridge of communication between threads.</p>
<p>Signals can also contain data, so if you emit a signal that holds data, then you&rsquo;ll receive that data in all the slots connected to the signal.</p>
<p>In the <a href="https://realpython.com/python-pyqt-qthread/#using-qthread-to-prevent-freezing-guis">Responsive GUI</a> application example, you used the signals and slots mechanism to establish communication between threads. For example, you connected the worker&rsquo;s <code>progress</code> signal to the application&rsquo;s <code>.reportProgress()</code> slot. <code>progress</code> holds an integer value indicating the long-running task&rsquo;s progress, and <code>.reportProgress()</code> receives that value as an argument so it can update the <em>Long-Running Step</em> label.</p>
<p>Establishing connections between signals and slots in different threads is the foundation of interthread communication in PyQt. At this point, a good exercise for you to try might be to use a <a href="https://doc.qt.io/qt-5/qprogressbar.html"><code>QToolBar</code></a> object instead of the <em>Long-Running Step</em> label to show the progress of the operation in the Responsive GUI application using signals and slots.</p>
</section><section class="section3" id="sharing-data-between-threads"><h3>Sharing Data Between Threads<a class="headerlink" href="#sharing-data-between-threads" title="Permanent link"></a></h3>
<p>Creating multithreaded applications often requires that multiple threads have access to the same data or resources. If multiple threads access the same data or resource concurrently, and at least one of them writes or modifies this shared resource, then you might face crashes, memory or data corruption, deadlocks, or other issues.</p>
<p>There are at least <a href="https://en.wikipedia.org/wiki/Thread_safety#Implementation_approaches">two approaches</a> that allow you to protect your data and resources against concurrent access:</p>
<ol>
<li>
<p><strong>Avoid shared state</strong> with the following techniques: </p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Immutable_object">Immutable objects</a></li>
<li><a href="https://en.wikipedia.org/wiki/Thread-local_storage">Thread-local storage</a></li>
<li><a href="https://en.wikipedia.org/wiki/Reentrant_(subroutine)">Reentrant code</a></li>
</ul>
</li>
<li>
<p><strong>Synchronize access to a shared state</strong> with the following techniques:</p>
<ul>
<li><a href="https://en.wikipedia.org/w/index.php?title=Atomicity_(programming)&amp;redirect=no">Atomic operations</a></li>
<li><a href="https://en.wikipedia.org/wiki/Mutual_exclusion">Mutual exclusion</a></li>
</ul>
</li>
</ol>
<p>If you need to share resources, then you should use the second approach. <strong>Atomic operations</strong> are carried out in a single execution step, so they can&rsquo;t be interrupted by other threads. They ensure that only one thread will modify a resource at a given time.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> For a reference on how CPython manages atomic operations, check out <a href="https://docs.python.org/3/faq/library.html#what-kinds-of-global-value-mutation-are-thread-safe">What kinds of global value mutation are thread-safe?</a></p>
<p>Note that other Python implementations may behave differently, so if you&rsquo;re using a different implementation, then take a look at its documentation for further detail on atomic operations and thread safety.</p>
</div>
<p><strong>Mutual exclusion</strong> is a common pattern in multithreaded programming. Access to data and resources is protected using <a href="https://en.wikipedia.org/wiki/Lock_(computer_science)">locks</a>, which are a synchronization mechanism that typically allows only one thread to access a resource at a given time.</p>
<p>For example, if thread A needs to update a global variable, then it can acquire a lock on that variable. This prevents thread B from accessing the variable at the same time. Once thread A finishes updating the variable, it releases the lock, and thread B can access the variable. This is based on the principle <strong>mutual exclusion</strong>, which enforces synchronized access by making threads wait for one another when accessing data and resources.</p>
<p>It&rsquo;s important to mention that using locks has a significant cost and can reduce the overall performance of your application. Thread synchronization forces most threads to wait until a resource becomes available, so you won&rsquo;t be taking advantage of parallel execution anymore.</p>
<p>PyQt provides a few convenient classes for protecting resources and data from concurrent access:</p>
<ul>
<li>
<p><strong><a href="https://doc.qt.io/qt-5/qmutex.html"><code>QMutex</code></a></strong> is a lock class that allows you to manage mutual exclusion. You can lock a mutex in a given thread to gain exclusive access to a shared resource. Once the mutex is unlocked, other threads can get access to the resource.</p>
</li>
<li>
<p><strong><a href="https://doc.qt.io/qt-5/qreadwritelock.html"><code>QReadWriteLock</code></a></strong> is similar to <code>QMutex</code> but distinguishes between reading and writing access. With this type of lock, you can allow multiple threads to have simultaneous read-only access to a shared resource. If a thread needs to write to the resource, then all other threads must be blocked until the writing is complete.</p>
</li>
<li>
<p><strong><a href="https://doc.qt.io/qt-5/qsemaphore.html"><code>QSemaphore</code></a></strong> is a generalization of <code>QMutex</code> that protects a certain number of identical resources. If a semaphore is protecting <em>n</em> resources, and you try to lock <em>n</em> + 1 resources, then the semaphore gets blocked, preventing threads from accessing the resources.</p>
</li>
</ul>
<p>With PyQt&rsquo;s lock classes, you can secure your data and resources and prevent a lot of problems. The next section shows an example of how to use <code>QMutex</code> for these purposes.</p>
</section><section class="section3" id="protecting-shared-data-with-qmutex"><h3>Protecting Shared Data With <code>QMutex</code><a class="headerlink" href="#protecting-shared-data-with-qmutex" title="Permanent link"></a></h3>
<p><code>QMutex</code> is commonly used in multithreaded PyQt applications to prevent multiple threads from accessing shared data and resources concurrently. In this section, you&rsquo;ll code a GUI application that uses a <code>QMutex</code> object to protect a global variable from concurrent write access.</p>
<p>To learn how to use <code>QMutex</code>, you&rsquo;ll code an example that manages a bank account from which two people can withdraw money at any time. In this case, you need to protect the account balance from parallel access. Otherwise, people could end up withdrawing more money than they have in the bank.</p>
<p>For example, suppose you have an account with $100. Two people check the available balance at the same time and see that the account has $100. They each think that they can withdraw $60 and leave $40 in the account, so they proceed with the transaction. The resulting balance in the account will be -$20, which might be a significant problem.</p>
<p>To code the example, you&rsquo;ll start by importing the required modules, functions, and classes. You also add a basic <code>logging</code> configuration and define two global variables:</p>
<div class="highlight python"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QMutex</span><span class="p">,</span> <span class="n">QObject</span><span class="p">,</span> <span class="n">QThread</span><span class="p">,</span> <span class="n">pyqtSignal</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">QApplication</span><span class="p">,</span>
    <span class="n">QLabel</span><span class="p">,</span>
    <span class="n">QMainWindow</span><span class="p">,</span>
    <span class="n">QPushButton</span><span class="p">,</span>
    <span class="n">QVBoxLayout</span><span class="p">,</span>
    <span class="n">QWidget</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="n">balance</span> <span class="o">=</span> <span class="mf">100.00</span>
<span class="n">mutex</span> <span class="o">=</span> <span class="n">QMutex</span><span class="p">()</span>
</code></pre></div>
<p><code>balance</code> is a global variable that you&rsquo;ll use to store the current balance in the bank account. <code>mutex</code> is a <code>QMutex</code> object that you&rsquo;ll use to protect <code>balance</code> from parallel access. In other words, with <code>mutex</code>, you&rsquo;ll prevent multiple threads from accessing <code>balance</code> at the same time.</p>
<p>The next step is to create a subclass of <code>QObject</code> that holds the code for managing how to withdraw money from the bank account. You&rsquo;ll call that class <code>AccountManager</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="k">class</span> <span class="nc">AccountManager</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="n">finished</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">updatedBalance</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> wants to withdraw $</span><span class="si">%.2f</span><span class="s2">...&quot;</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
        <span class="k">global</span> <span class="n">balance</span>
        <span class="n">mutex</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">balance</span> <span class="o">-</span> <span class="n">amount</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">balance</span> <span class="o">-=</span> <span class="n">amount</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;-$</span><span class="si">%.2f</span><span class="s2"> accepted&quot;</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;-$</span><span class="si">%.2f</span><span class="s2"> rejected&quot;</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;===Balance===: $</span><span class="si">%.2f</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">balance</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updatedBalance</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="n">mutex</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
</code></pre></div>
<p>In <code>AccountManager</code>, you first define two signals:</p>
<ol>
<li><strong><code>finished</code></strong> indicates when the class processes its work.</li>
<li><strong><code>updatedBalance</code></strong> indicates when <code>balance</code> gets updated.</li>
</ol>
<p>Then you define <code>.withdraw()</code>. In this method, you do the following:</p>
<ul>
<li>Show a message that points out the person who wants to withdraw some money</li>
<li>Use a <a href="https://realpython.com/python-scope-legb-rule/#the-global-statement"><code>global</code> statement</a> to use <code>balance</code> from within <code>.withdraw()</code></li>
<li>Call <code>.lock()</code> on <code>mutex</code> to acquire the lock and protect the <code>balance</code> from parallel access</li>
<li>Check if the account balance allows withdrawing the amount at hand</li>
<li>Call <code>sleep()</code> to simulate that the operation takes some time to complete</li>
<li>Decrement the balance by the required amount of money</li>
<li>Show messages to notify if the transaction was accepted or not</li>
<li>Emit the <code>updatedBalance</code> signal to notify that the balance has been updated</li>
<li>Release the lock to allow other threads to access <code>balance</code></li>
<li>Emit the <code>finished</code> signal to notify that the operation has finished</li>
</ul>
<p>This application will show a window like this:</p>
<figure class="js-lightbox"><a href="https://files.realpython.com/media/account-manager-gui.b9050a0da8b2.png" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block " src="https://files.realpython.com/media/account-manager-gui.b9050a0da8b2.png" width="202" height="175" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/account-manager-gui.b9050a0da8b2.png&amp;w=50&amp;sig=4bf7add39504d8ab768ccd1d0d50c26875fe9783 50w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/account-manager-gui.b9050a0da8b2.png&amp;w=101&amp;sig=e53da6b6841d199d056038a955d67762a0050169 101w, https://files.realpython.com/media/account-manager-gui.b9050a0da8b2.png 202w" sizes="75vw" alt="Account Manager GUI" data-asset="3269" /></a></figure>
<p>Here&rsquo;s the required code for creating this GUI:</p>
<div class="highlight python"><pre><span></span><code><span class="k">class</span> <span class="nc">Window</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Account Manager&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centralWidget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">centralWidget</span><span class="p">)</span>
        <span class="n">button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Withdraw Money!&quot;</span><span class="p">)</span>
        <span class="n">button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">startThreads</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balanceLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current Balance: $</span><span class="si">{</span><span class="n">balance</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">balanceLabel</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centralWidget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</code></pre></div>
<p>The <em>Current Balance</em> label shows the account&rsquo;s available balance. If you click the <em>Withdraw Money!</em> button, then the application will simulate two people trying to withdraw money from the account at the same time. You&rsquo;ll simulate these two people using threads:</p>
<div class="highlight python"><pre><span></span><code><span class="k">class</span> <span class="nc">Window</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="c1"># Snip...</span>
    <span class="k">def</span> <span class="nf">createThread</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="n">thread</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">()</span>
        <span class="n">worker</span> <span class="o">=</span> <span class="n">AccountManager</span><span class="p">()</span>
        <span class="n">worker</span><span class="o">.</span><span class="n">moveToThread</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
        <span class="n">thread</span><span class="o">.</span><span class="n">started</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">worker</span><span class="o">.</span><span class="n">withdraw</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="n">amount</span><span class="p">))</span>
        <span class="n">worker</span><span class="o">.</span><span class="n">updatedBalance</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateBalance</span><span class="p">)</span>
        <span class="n">worker</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>
        <span class="n">worker</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">worker</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="n">thread</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">thread</span>
</code></pre></div>
<p>This method contains the required code for creating a thread for each person. In this example, you connect the thread&rsquo;s <code>started</code> signal with the worker&rsquo;s <code>.withdraw()</code>, so when the thread starts, this method will run automatically. You also connect the worker&rsquo;s <code>updatedBalance</code> signal to a method called <code>.updateBalance()</code>. This method will update the <em>Current Balance</em> label with the current account <code>balance</code>.</p>
<p>Here&rsquo;s the code for <code>.updateBalance()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="k">class</span> <span class="nc">Window</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="c1"># Snip...</span>
    <span class="k">def</span> <span class="nf">updateBalance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balanceLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current Balance: $</span><span class="si">{</span><span class="n">balance</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Anytime a person withdraws money, the account&rsquo;s balance gets reduced by the requested amount. This method updates the text of the <em>Current Balance</em> label to reflect the changes in the account balance.</p>
<p>To complete the application, you need to create the two people and start a thread for each of them:</p>
<div class="highlight python"><pre><span></span><code><span class="k">class</span> <span class="nc">Window</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Snip...</span>
    <span class="k">def</span> <span class="nf">startThreads</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">people</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Alice&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">,</span>
            <span class="s2">&quot;Bob&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threads</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createThread</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">person</span><span class="p">,</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">people</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="p">:</span>
            <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
<p>First, you add <code>.threads</code> as an instance attribute to the initializer of your <code>Window</code>. This variable will hold a list of threads to prevent the threads from getting out of scope once <code>.startThreads()</code> returns. Then you define <code>.startThreads()</code> to create two people and a thread for each of them.</p>
<p>In <code>.startThreads()</code>, you perform the following operations:</p>
<ul>
<li>Clear the thread in <code>.threads</code> if any to remove threads that have been destroyed already</li>
<li>Create a dictionary containing two people, <code>Alice</code> and <code>Bob</code>. Each person will try to withdraw a random amount of money from the bank account</li>
<li>Create a thread for each person using a <a href="https://realpython.com/list-comprehension-python/">list comprehension</a> and <code>.createThread()</code></li>
<li>Start the threads in a <code>for</code> loop</li>
</ul>
<p>With this last piece of code, you&rsquo;re almost done. You just need to create the application and the window and then run the event loop:</p>
<div class="highlight python"><pre><span></span><code><span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">Window</span><span class="p">()</span>
<span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec</span><span class="p">())</span>
</code></pre></div>
<p>If you run this application from your command line, then you&rsquo;ll get the following behavior:</p>
<figure class="js-lightbox"><a href="https://files.realpython.com/media/account-manager-example.ed39ea2ca678.gif" target="_blank"><img loading="lazy" class="img-fluid mx-auto d-block " src="https://files.realpython.com/media/account-manager-example.ed39ea2ca678.gif" width="653" height="410" srcset="https://files.realpython.com/media/account-manager-example.ed39ea2ca678.gif 163w, https://files.realpython.com/media/account-manager-example.ed39ea2ca678.gif 326w, https://files.realpython.com/media/account-manager-example.ed39ea2ca678.gif 653w" sizes="75vw" alt="Account Manager Example" data-asset="3268" /></a></figure>
<p>The output in the background terminal shows that the threads work. Using a <code>QMutex</code> object in this example allows you to protect the bank account balance and synchronize the access to it. This prevents users from withdrawing an amount of money that exceeds the available balance.</p>
<div><div class="rounded border border-light" style="display:block;position:relative;"><div style="display:block;width:100%;padding-top:12.5%;"></div><div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div></div><a class="small text-muted" href="/account/join/" rel="nofollow"><i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div></section></section><section class="section2" id="multithreading-in-pyqt-best-practices"><h2>Multithreading in PyQt: Best Practices<a class="headerlink" href="#multithreading-in-pyqt-best-practices" title="Permanent link"></a></h2>
<p>There are a few best practices that you can apply when building multithreaded applications in PyQt. Here&rsquo;s a non-exhaustive list:</p>
<ul>
<li>Avoid launching long-running tasks in the main thread of a PyQt application.</li>
<li>Use <code>QObject.moveToThread()</code> and <code>QThread</code> objects to create worker threads.</li>
<li>Use <code>QThreadPool</code> and <code>QRunnable</code> if you need to manage a pool of worker threads.</li>
<li>Use signals and slots to establish safe interthread communication.</li>
<li>Use <code>QMutex</code>, <code>QReadWriteLock</code>, or <code>QSemaphore</code> to prevent threads from accessing shared data and resources concurrently.</li>
<li>Make sure to unlock or release <code>QMutex</code>, <code>QReadWriteLock</code>, or <code>QSemaphore</code> before finishing a thread.</li>
<li>Release the lock in all possible execution paths in functions with multiple <a href="https://realpython.com/python-return-statement/"><code>return</code> statements</a>.</li>
<li>Don&rsquo;t try to create, access, or update GUI components or widgets from a worker thread.</li>
<li>Don&rsquo;t try to move a <code>QObject</code> with a parent-child relationship to a different thread.</li>
</ul>
<p>If you consistently apply these best practices when working with threads in PyQt, then your applications will be less error-prone and more accurate and robust. You&rsquo;ll prevent problems like data corruption, deadlocks, race conditions, and others. You&rsquo;ll also provide a better experience for your users.</p>
</section><section class="section2" id="conclusion"><h2>Conclusion<a class="headerlink" href="#conclusion" title="Permanent link"></a></h2>
<p>Executing long-running tasks in a PyQt application&rsquo;s main thread might cause the application&rsquo;s GUI to freeze and becomes unresponsive. This is a common issue in <a href="https://realpython.com/learning-paths/python-gui-programming/">GUI programming</a> and can result in a bad user experience. Creating worker threads with <a href="https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qthread.html#">PyQt&rsquo;s <code>QThread</code></a> to offload long-running tasks effectively works around this issue in your GUI applications.</p>
<p><strong>In this tutorial, you&rsquo;ve learned how to:</strong></p>
<ul>
<li>Use PyQt&rsquo;s <strong><code>QThread</code></strong> to prevent GUI applications from freezing</li>
<li>Create <strong>reusable <code>QThread</code> objects</strong> with PyQt&rsquo;s <code>QThreadPool</code> and <code>QRunnable</code></li>
<li>Use signals and slots for <strong>interthread communication</strong> in PyQt</li>
<li>Use <strong>shared resources</strong> safely with PyQt&rsquo;s lock classes</li>
</ul>
<p>You also learned some best practices that apply to multithreaded programming with PyQt and its built-in thread support.</p>
</section>
<div class="text-center my-3">
<div class="jsCompletionStatusWidget btn-group mb-0">
<button title="Click to mark as completed" class="jsBtnCompletion btn btn-secondary border-right " style="border-top-right-radius: 0; border-bottom-right-radius: 0;" disabled>Mark as Completed</button>
<button title="Add bookmark" class="jsBtnBookmark btn btn-secondary border-left" disabled><i class="fa fa-fw fa-bookmark-o"></i></button>
</div>
</div>
</div>
<div class="card mt-4 mb-4 bg-secondary">
<p class="card-header h3 text-center bg-light">🐍 Python Tricks 💌</p>
<div class="card-body">
<div class="container">
<div class="row">
<div class="col-xs-12 col-sm-7">
<p>Get a short &amp; sweet <strong>Python Trick</strong> delivered to your inbox every couple of days. No spam ever. Unsubscribe any time. Curated by the Real Python team.</p>
</div>
<div class="col-xs-12 col-sm-5">
<img class="img-fluid rounded mb-3" src="https://cdn.realpython.com/static/pytrick-dict-merge.4201a0125a5e.png" width="738" height="490" alt="Python Tricks Dictionary Merge">
</div>
</div>
<div class="row mb-3">
<form class="col-12" action="/optins/process/" method="post">
<input type="hidden" name="csrfmiddlewaretoken" value="OqYtU0CMAw7JulqmhH6UVOm5njm4Fi69UvDGvzOKV12TEe54qty4lTl1DerYSQAY">
<input type="hidden" name="slug" value="static-python-tricks-footer">
<div class="form-group">
<input name="email" type="email" class="form-control form-control-lg" placeholder="Email Address" required>
</div>
<button name="submit" type="submit" class="btn btn-primary btn-lg btn-block">Send Me Python Tricks »</button>
</form>
</div>
</div>
</div>
</div>
<div class="card mt-3" id="author">
<p class="card-header h3">About <strong>Leodanis Pozo Ramos</strong></p>
<div class="card-body">
<div class="container p-0">
<div class="row">
<div class="col-12 col-md-3 align-self-center">
<a href="/team/lpozoramos/"><img loading="lazy" src="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=862&amp;h=862&amp;mode=crop&amp;sig=2d089ce1d1dc031cba6526fec6773d79fd0495d8" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=215&amp;h=215&amp;mode=crop&amp;sig=d5445576454e66fffb8c54c94a51779f114f6d98 215w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=431&amp;h=431&amp;mode=crop&amp;sig=09e05527710aa4fc68ca8cc43070c43c6aa15011 431w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=862&amp;h=862&amp;mode=crop&amp;sig=2d089ce1d1dc031cba6526fec6773d79fd0495d8 862w" sizes="25vw" width="862" height="862" class="d-block d-md-none rounded-circle img-fluid w-33 mb-0 mx-auto" alt="Leodanis Pozo Ramos"></a>
 <a href="/team/lpozoramos/"><img loading="lazy" src="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=862&amp;h=862&amp;mode=crop&amp;sig=2d089ce1d1dc031cba6526fec6773d79fd0495d8" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=215&amp;h=215&amp;mode=crop&amp;sig=d5445576454e66fffb8c54c94a51779f114f6d98 215w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=431&amp;h=431&amp;mode=crop&amp;sig=09e05527710aa4fc68ca8cc43070c43c6aa15011 431w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=862&amp;h=862&amp;mode=crop&amp;sig=2d089ce1d1dc031cba6526fec6773d79fd0495d8 862w" sizes="25vw" width="862" height="862" class="d-none d-md-block rounded-circle img-fluid w-100 mb-0" alt="Leodanis Pozo Ramos"></a>
</div>
<div class="col mt-3">
<p>Leodanis is an industrial engineer who loves Python and software development. He&#x27;s a self-taught Python developer with 6+ years of experience. He&#x27;s an avid technical writer with a growing number of articles published on Real Python and other sites.</p>
<a href="/team/lpozoramos/" class="card-link">» More about Leodanis</a>
</div>
</div>
</div>
</div>
<hr class="my-0">
<div class="card-body pb-0">
<div class="container">
<div class="row">
<p><em>Each tutorial at Real Python is created by a team of developers so that it meets our high quality standards. The team members who worked on this tutorial are:</em></p>
</div>
<div class="row align-items-center w-100 mx-auto">
<div class="col-4 col-sm-2 align-self-center">
<a href="/team/asantos/"><img loading="lazy" src="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/asantos-avatar.888c78fffab3.jpg&amp;w=700&amp;h=700&amp;mode=crop&amp;sig=be17609cd7f6a4cd249ff61e186b3ad1aece949c" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/asantos-avatar.888c78fffab3.jpg&amp;w=175&amp;h=175&amp;mode=crop&amp;sig=30253487c673fd67bb45ea6bef95b3c57e115e46 175w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/asantos-avatar.888c78fffab3.jpg&amp;w=350&amp;h=350&amp;mode=crop&amp;sig=a43bd9ea30a6f61a4fc2451ab9abfc6faec8a2c0 350w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/asantos-avatar.888c78fffab3.jpg&amp;w=700&amp;h=700&amp;mode=crop&amp;sig=be17609cd7f6a4cd249ff61e186b3ad1aece949c 700w" sizes="10vw" width="862" height="862" class="rounded-circle img-fluid w-100" alt="Aldren Santos"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="/team/asantos/" class="card-link small"><p>Aldren</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center">
<a href="/team/bzaczynski/"><img loading="lazy" src="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/profile-picture.9b78351e1462.jpg&amp;w=900&amp;h=900&amp;mode=crop&amp;sig=84695876e8b66be5e91aa5eb72f25a3fb4dcceeb" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/profile-picture.9b78351e1462.jpg&amp;w=225&amp;h=225&amp;mode=crop&amp;sig=8e1a0d84149944be3c2615404fb46e7da001c17f 225w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/profile-picture.9b78351e1462.jpg&amp;w=450&amp;h=450&amp;mode=crop&amp;sig=2e7c93ebefa8a958432160f29cd4a09c889ae8d3 450w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/profile-picture.9b78351e1462.jpg&amp;w=900&amp;h=900&amp;mode=crop&amp;sig=84695876e8b66be5e91aa5eb72f25a3fb4dcceeb 900w" sizes="10vw" width="862" height="862" class="rounded-circle img-fluid w-100" alt="Bartosz Zaczyński"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="/team/bzaczynski/" class="card-link small"><p>Bartosz</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center">
<a href="/team/gahjelle/"><img loading="lazy" src="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/gahjelle.470149ee709e.jpg&amp;w=800&amp;h=800&amp;mode=crop&amp;sig=e9b761c6cf1359953014dba05554f5424eb116e1" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/gahjelle.470149ee709e.jpg&amp;w=200&amp;h=200&amp;mode=crop&amp;sig=c6390201e73d3e09429d73da5bb29c17ab10403a 200w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/gahjelle.470149ee709e.jpg&amp;w=400&amp;h=400&amp;mode=crop&amp;sig=fcea459ee24a7b320573cadee324cf75509dc1d6 400w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/gahjelle.470149ee709e.jpg&amp;w=800&amp;h=800&amp;mode=crop&amp;sig=e9b761c6cf1359953014dba05554f5424eb116e1 800w" sizes="10vw" width="862" height="862" class="rounded-circle img-fluid w-100" alt="Geir Arne Hjelle"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="/team/gahjelle/" class="card-link small"><p>Geir Arne</p></a>
</div>
</div>
<div class="row align-items-center w-100 mx-auto">
<div class="col-4 col-sm-2 align-self-center">
<a href="/team/jjablonski/"><img loading="lazy" src="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg&amp;w=800&amp;h=800&amp;mode=crop&amp;sig=c363b704eeccb35f2247db13baff3d4383459858" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg&amp;w=200&amp;h=200&amp;mode=crop&amp;sig=706b16de3cb88a8f353f4a98d7c7bc7234229bd0 200w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg&amp;w=400&amp;h=400&amp;mode=crop&amp;sig=6d7aa672ca3f1ac5f7cd62ed1641b60f98d04d8b 400w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg&amp;w=800&amp;h=800&amp;mode=crop&amp;sig=c363b704eeccb35f2247db13baff3d4383459858 800w" sizes="10vw" width="862" height="862" class="rounded-circle img-fluid w-100" alt="Joanna Jablonski"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="/team/jjablonski/" class="card-link small"><p>Joanna</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center">
<a href="/team/jschmitt/"><img loading="lazy" src="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/profile-small_js.2f4d0d8da1ca.jpg&amp;w=400&amp;h=400&amp;mode=crop&amp;sig=d10d9fc35ba4a6608969e71b4c24c1e61176ee2d" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/profile-small_js.2f4d0d8da1ca.jpg&amp;w=100&amp;h=100&amp;mode=crop&amp;sig=ef40d1115d3b4c306b16314b5555d5dc55361da9 100w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/profile-small_js.2f4d0d8da1ca.jpg&amp;w=200&amp;h=200&amp;mode=crop&amp;sig=e1df2f238effe79f5750fc75258642036de498c3 200w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/profile-small_js.2f4d0d8da1ca.jpg&amp;w=400&amp;h=400&amp;mode=crop&amp;sig=d10d9fc35ba4a6608969e71b4c24c1e61176ee2d 400w" sizes="10vw" width="862" height="862" class="rounded-circle img-fluid w-100" alt="Jacob Schmitt"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="/team/jschmitt/" class="card-link small"><p>Jacob</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center"></div>
<div class="col pl-0 d-none d-sm-block"></div>
</div>

</div>
</div>
</div>
<div class="bg-light rounded py-4 my-4 shadow shadow-sm mx-n2">
<div class="col-12 text-center d-block d-md-none">
<p class="h2 mb-3">Master <u><span class="marker-highlight">Real-World Python Skills</mark></u> With Unlimited Access to Real&nbsp;Python</p>
<p class="mb-1"><img class="w-75" src="https://cdn.realpython.com/static/videos/lesson-locked.f5105cfd26db.svg" width="510" height="260"></p>
<p class="mx-auto w-75 mb-3 small"><strong>Join us and get access to hundreds of tutorials, hands-on video courses, and a community of expert&nbsp;Pythonistas:</strong></p>
<p class="mb-0"><a href="/account/join/?utm_source=rp_article_footer&utm_content=python-pyqt-qthread" class="btn btn-primary btn-sm px-4 mb-0">Level Up Your Python Skills »</a>
</div>
<div class="col-12 text-center d-none d-md-block">
<p class="h2 mb-2">Master <u><span class="marker-highlight">Real-World Python Skills</span></u><br>With Unlimited Access to Real&nbsp;Python</p>
<p class="mb-2"><img class="w-50 mb-2" src="https://cdn.realpython.com/static/videos/lesson-locked.f5105cfd26db.svg" width="510" height="260"></p>
<p class="mx-auto w-50 mb-3"><strong>Join us and get access to hundreds of tutorials, hands-on video courses, and a community of expert Pythonistas:</strong></p>
<p><a href="/account/join/?utm_source=rp_article_footer&utm_content=python-pyqt-qthread" class="btn btn-primary btn-lg px-4">Level Up Your Python Skills »</a>
</div>
</div>
<div class="card mt-4" id="reader-comments">
<p class="card-header h3">What Do You Think?</p>
<div class="text-center mt-3 mb-0 p-0">
<span>
<a target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet/?text=Check out this %23Python tutorial: Use%20PyQt%27s%20QThread%20to%20Prevent%20Freezing%20GUIs by @realpython&url=https%3A//realpython.com/python-pyqt-qthread/" class="mr-1 badge badge-twitter text-light mb-1"><i class="mr-1 fa fa-twitter text-light"></i>Tweet</a>
<a target="_blank" rel="nofollow" href="https://facebook.com/sharer/sharer.php?u=https%3A//realpython.com/python-pyqt-qthread/" class="mr-1 badge badge-facebook text-light mb-1"><i class="mr-1 fa fa-facebook text-light"></i>Share</a>
<a target="_blank" rel="nofollow" href="mailto:?subject=Python article for you&body=Check out this Python tutorial:%0A%0AUse%20PyQt%27s%20QThread%20to%20Prevent%20Freezing%20GUIs%0A%0Ahttps%3A//realpython.com/python-pyqt-qthread/" class="badge badge-red text-light mb-1"><i class="mr-1 fa fa-envelope text-light"></i>Email</a>
</span>
</div>
<div class="card-body">
<div class="alert alert-dark">
<p class="mb-0"><strong>Real Python Comment Policy:</strong> The most useful comments are those written with the goal of learning from or helping out other readers—after reading the whole article and all the earlier comments. Complaints and insults generally won’t make the cut here.</p>
</div>
<p>What’s your #1 takeaway or favorite thing you learned? How are you going to put your newfound skills to use? Leave a comment below and let us know.</p>
<div class="mb-4" id="disqus_thread">
</div>
</div>
</div>
<div class="card mt-4 mb-4">
<p class="card-header h3">Keep Learning</p>
<div class="card-body">
<p class="mb-0">Related Tutorial Categories:
<a href="/tutorials/gui/" class="badge badge-light text-muted">gui</a>
<a href="/tutorials/intermediate/" class="badge badge-light text-muted">intermediate</a>
</p>
</div>
</div>
<div class="modal fade" tabindex="-1" role="dialog" id="rprw">
<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
<div class="modal-content">
<div class="modal-header border-0 mt-3">
<div class="col-12 modal-title text-center">
<h2 class="my-0 mx-5">Keep reading Real&nbsp;Python by creating a free account or signing&nbsp;in:</h2>
</div>
</div>
<div class="modal-body bg-light">
<div class="col-12 text-center">
<p class="mb-2 mt-3"><a href="/account/signup/?intent=continue_reading&utm_source=rp&utm_medium=web&utm_campaign=rwn&utm_content=v1&next=%2Fpython-pyqt-qthread%2F"><img class="w-50 mb-2" src="https://cdn.realpython.com/static/videos/lesson-locked.f5105cfd26db.svg" width="510" height="260" alt="Keep reading"></a></p>
<p><a href="/account/signup/?intent=continue_reading&utm_source=rp&utm_medium=web&utm_campaign=rwn&utm_content=v1&next=%2Fpython-pyqt-qthread%2F" class="btn btn-primary btn-lg px-5"></i>Continue »</a></a>
</div>
</div>
<div class="modal-footer border-0">
<p class="text-center text-muted mt-2 mb-1">Already have an account? <a href="/account/login/?next=/python-pyqt-qthread/">Sign-In</a></p>
</div>
</div>
</div>
</div>
<script src="https://cdn.realpython.com/static/frontend/reader/rw.38bf29157dfe.js" async></script>
</div>
<aside class="col-md-7 col-lg-4">
<div class="card mb-3 bg-secondary">
<form class="card-body" action="/optins/process/" method="post">
<div class="form-group">
<p class="h5 text-muted text-center">— FREE Email Series —</p>
<p class="h3 text-center">🐍 Python Tricks 💌</p>
<p><img class="img-fluid rounded" src="https://cdn.realpython.com/static/pytrick-dict-merge.4201a0125a5e.png" width="738" height="490" alt="Python Tricks Dictionary Merge"></p>
</div>
<div class="form-group">
<input type="hidden" name="csrfmiddlewaretoken" value="OqYtU0CMAw7JulqmhH6UVOm5njm4Fi69UvDGvzOKV12TEe54qty4lTl1DerYSQAY">
<input type="hidden" name="slug" value="static-python-tricks-sidebar">
<input type="email" class="form-control form-control-md" name="email" placeholder="Email&hellip;" required>
</div>
<button type="submit" name="submit" class="btn btn-primary btn-md btn-block">Get Python Tricks »</button>
<p class="mb-0 mt-2 text-muted text-center">🔒 No spam. Unsubscribe any time.</p>
</form>
</div>
<div class="sidebar-module sidebar-module-inset border">
<p class="h4"><a class="link-unstyled" href="/tutorials/all/">All Tutorial Topics</a></p>
<a href="/tutorials/advanced/" class="badge badge-light text-muted">advanced</a>
<a href="/tutorials/api/" class="badge badge-light text-muted">api</a>
<a href="/tutorials/basics/" class="badge badge-light text-muted">basics</a>
<a href="/tutorials/best-practices/" class="badge badge-light text-muted">best-practices</a>
<a href="/tutorials/community/" class="badge badge-light text-muted">community</a>
<a href="/tutorials/databases/" class="badge badge-light text-muted">databases</a>
<a href="/tutorials/data-science/" class="badge badge-light text-muted">data-science</a>
<a href="/tutorials/devops/" class="badge badge-light text-muted">devops</a>
<a href="/tutorials/django/" class="badge badge-light text-muted">django</a>
<a href="/tutorials/docker/" class="badge badge-light text-muted">docker</a>
<a href="/tutorials/flask/" class="badge badge-light text-muted">flask</a>
<a href="/tutorials/front-end/" class="badge badge-light text-muted">front-end</a>
<a href="/tutorials/gamedev/" class="badge badge-light text-muted">gamedev</a>
<a href="/tutorials/gui/" class="badge badge-light text-muted">gui</a>
<a href="/tutorials/intermediate/" class="badge badge-light text-muted">intermediate</a>
<a href="/tutorials/machine-learning/" class="badge badge-light text-muted">machine-learning</a>
<a href="/tutorials/projects/" class="badge badge-light text-muted">projects</a>
<a href="/tutorials/python/" class="badge badge-light text-muted">python</a>
<a href="/tutorials/testing/" class="badge badge-light text-muted">testing</a>
<a href="/tutorials/tools/" class="badge badge-light text-muted">tools</a>
<a href="/tutorials/web-dev/" class="badge badge-light text-muted">web-dev</a>
<a href="/tutorials/web-scraping/" class="badge badge-light text-muted">web-scraping</a>
</div>
<div class="sidebar-module sidebar-module-inset p-0" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:100%;"></div>
<div class="rpad" data-unit="1x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div>
</div>
</div>
<div class="sidebar-sticky ">
<div class="bg-light sidebar-module sidebar-module-inset" id="sidebar-toc">
<p class="h4 text-muted"><a class="link-unstyled" href="#toc">Table of Contents</a></p>
<div class="toc">
<ul>
<li><a href="#freezing-a-gui-with-long-running-tasks">Freezing a GUI With Long-Running Tasks</a></li>
<li><a href="#multithreading-the-basics">Multithreading: The Basics</a></li>
<li><a href="#multithreading-in-pyqt-with-qthread">Multithreading in PyQt With QThread</a><ul>
<li><a href="#the-main-thread">The Main Thread</a></li>
<li><a href="#worker-threads">Worker Threads</a></li>
</ul>
</li>
<li><a href="#using-qthread-vs-pythons-threading">Using QThread vs Python&rsquo;s threading</a></li>
<li><a href="#using-qthread-to-prevent-freezing-guis">Using QThread to Prevent Freezing GUIs</a></li>
<li><a href="#reusing-threads-qrunnable-and-qthreadpool">Reusing Threads: QRunnable and QThreadPool</a></li>
<li><a href="#communicating-with-worker-qthreads">Communicating With Worker QThreads</a><ul>
<li><a href="#using-signals-and-slots">Using Signals and Slots</a></li>
<li><a href="#sharing-data-between-threads">Sharing Data Between Threads</a></li>
<li><a href="#protecting-shared-data-with-qmutex">Protecting Shared Data With QMutex</a></li>
</ul>
</li>
<li><a href="#multithreading-in-pyqt-best-practices">Multithreading in PyQt: Best Practices</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div class="sidebar-module sidebar-module-inset text-center my-3 py-0">
<div class="jsCompletionStatusWidget btn-group mb-0">
<button title="Click to mark as completed" class="jsBtnCompletion btn btn-secondary border-right " style="border-top-right-radius: 0; border-bottom-right-radius: 0;" disabled>Mark as Completed</button>
<button title="Add bookmark" class="jsBtnBookmark btn btn-secondary border-left" disabled><i class="fa fa-fw fa-bookmark-o"></i></button>
</div>
</div>
<div class="sidebar-module sidebar-module-inset text-center my-3 py-0">
<span>
<a target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet/?text=Check out this %23Python tutorial: Use%20PyQt%27s%20QThread%20to%20Prevent%20Freezing%20GUIs by @realpython&url=https%3A//realpython.com/python-pyqt-qthread/" class="mr-1 badge badge-twitter text-light mb-1"><i class="mr-1 fa fa-twitter text-light"></i>Tweet</a>
<a target="_blank" rel="nofollow" href="https://facebook.com/sharer/sharer.php?u=https%3A//realpython.com/python-pyqt-qthread/" class="mr-1 badge badge-facebook text-light mb-1"><i class="mr-1 fa fa-facebook text-light"></i>Share</a>
<a target="_blank" rel="nofollow" href="mailto:?subject=Python article for you&body=Check out this Python tutorial:%0A%0AUse%20PyQt%27s%20QThread%20to%20Prevent%20Freezing%20GUIs%0A%0Ahttps%3A//realpython.com/python-pyqt-qthread/" class="badge badge-red text-light mb-1"><i class="mr-1 fa fa-envelope text-light"></i>Email</a>
</span>
</div>
<div class="sidebar-module sidebar-module-inset p-0" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:25%;"></div>
<div class="rpad" data-unit="4x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div>
</div>
</div>
</div>
</aside>
</div>
</div>
<div class="modal fade" id="modal-python-basics-sample-free-chapter" tabindex="-1" role="dialog" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
<div class="modal-content">
<div class="modal-header bg-light pt-3 pb-2">
<div class="container-fluid">
<div class="row">
<div class="col-12">
<div class="progress" style="height: .5rem;">
<div class="progress-bar progress-bar-striped progress-bar-animated w-50" role="progressbar"></div>
</div>
</div>
<div class="col-12">
<p class="text-muted text-center mb-0 mt-2">Almost there! Complete this form and click the button below to gain instant access:</p>
</div>
</div>
</div>
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">&times;</span>
</button>
</div>
<div class="modal-body m-4">
<div class="container-fluid">
<div class="row align-items-center">
<div class="col-12 col-lg-4 mb-4">
<img class="img-fluid rounded" src="https://files.realpython.com/media/python-basics-3d-transparent-square.4fe8f4be40f7.png" width="1000" height="1000" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/python-basics-3d-transparent-square.4fe8f4be40f7.png&amp;w=250&amp;sig=206d2bd1e1daa7b30c57dabd7e766d5f368aa248 250w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/python-basics-3d-transparent-square.4fe8f4be40f7.png&amp;w=500&amp;sig=07d81883749c07a0a578cee521662e5a7e0d103d 500w, https://files.realpython.com/media/python-basics-3d-transparent-square.4fe8f4be40f7.png 1000w" sizes="50vw" alt="Python Basics: A Practical Introduction to Python 3">
</div>
<div class="col">
<p class="text-center h3 mb-4">&quot;Python Basics: A Practical Introduction to Python 3&quot; – Free Sample Chapter (PDF)</p>
<form class="col-12" action="/optins/process/" method="post">
<input type="hidden" name="csrfmiddlewaretoken" value="OqYtU0CMAw7JulqmhH6UVOm5njm4Fi69UvDGvzOKV12TEe54qty4lTl1DerYSQAY">
<input type="hidden" name="slug" value="python-basics-sample-free-chapter">
<div class="form-group">
<input type="email" name="email" class="form-control" placeholder="Email Address" required autofocus>
</div>
<button name="submit" type="submit" class="btn btn-primary btn-block text-wrap">Send My Sample Chapter »</button>
</form>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<footer class="footer">
<div class="container">
<div class="w-75 mx-auto mt-4 mb-0">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:12.5%;"></div>
<div class="rpad rounded border" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"></div>
</div>
<a class="small text-muted" href="/account/join/" rel="nofollow"> <i class="fa fa-info-circle" aria-hidden="true"> </i> Remove ads</a>
</div>
<p class="text-center text-muted w-75 mx-auto">© 2012–2021 Real Python&nbsp;⋅ <a href="/newsletter/">Newsletter</a>&nbsp;⋅ <a href="/podcasts/rpp/">Podcast</a>&nbsp;⋅ <a href="https://www.youtube.com/realpython">YouTube</a>&nbsp;⋅ <a href="https://twitter.com/realpython">Twitter</a>&nbsp;⋅ <a href="https://facebook.com/LearnRealPython">Facebook</a>&nbsp;⋅ <a href="https://www.instagram.com/realpython/">Instagram</a>&nbsp;⋅ <a href="/">Python&nbsp;Tutorials</a>&nbsp;⋅ <a href="/search">Search</a>&nbsp;⋅ <a href="/privacy-policy/">Privacy Policy</a>&nbsp;⋅ <a href="/energy-policy/" class="text-success active">Energy Policy</a>&nbsp;⋅ <a href="/sponsorships/">Advertise</a>&nbsp;⋅ <a href="/contact/">Contact</a><br>❤️ Happy Pythoning!</p>
</div>
</footer>
<script>
      (function(document, history, location) {
        var HISTORY_SUPPORT = !!(history && history.pushState);

        var anchorScrolls = {
          ANCHOR_REGEX: /^#[^ ]+$/,
          OFFSET_HEIGHT_PX: 120,

          /**
           * Establish events, and fix initial scroll position if a hash is provided.
           */
          init: function() {
            this.scrollToCurrent();
            window.addEventListener('hashchange', this.scrollToCurrent.bind(this));
            document.body.addEventListener('click', this.delegateAnchors.bind(this));
          },

          /**
           * Return the offset amount to deduct from the normal scroll position.
           * Modify as appropriate to allow for dynamic calculations
           */
          getFixedOffset: function() {
            return this.OFFSET_HEIGHT_PX;
          },

          /**
           * If the provided href is an anchor which resolves to an element on the
           * page, scroll to it.
           * @param  {String} href
           * @return {Boolean} - Was the href an anchor.
           */
          scrollIfAnchor: function(href, pushToHistory) {
            var match, rect, anchorOffset;

            if(!this.ANCHOR_REGEX.test(href)) {
              return false;
            }

            match = document.getElementById(href.slice(1));

            if(match) {
              rect = match.getBoundingClientRect();
              anchorOffset = window.pageYOffset + rect.top - this.getFixedOffset();
              window.scrollTo(window.pageXOffset, anchorOffset);

              // Add the state to history as-per normal anchor links
              if(HISTORY_SUPPORT && pushToHistory) {
                history.pushState({}, document.title, location.pathname + href);
              }
            }

            return !!match;
          },

          /**
           * Attempt to scroll to the current location's hash.
           */
          scrollToCurrent: function() {
            this.scrollIfAnchor(window.location.hash);
          },

          /**
           * If the click event's target was an anchor, fix the scroll position.
           */
          delegateAnchors: function(e) {
            var elem = e.target;

            if(
              elem.nodeName === 'A' &&
              this.scrollIfAnchor(elem.getAttribute('href'), true)
            ) {
              e.preventDefault();
            }
          }
        };

        window.addEventListener(
          'DOMContentLoaded', anchorScrolls.init.bind(anchorScrolls)
        );
      })(window.document, window.history, window.location);
    </script>
<script src="https://cdn.realpython.com/static/jquery.min.8fb8fee4fcc3.js"></script>
<script src="https://cdn.realpython.com/static/popper.min.1022eaf388cc.js"></script>
<script src="https://cdn.realpython.com/static/bootstrap.min.f0c2bcf5ef0c.js"></script>
<script>
    (function() {
      document.querySelectorAll(".js-search-form-submit").forEach(function(el) {
        el.addEventListener("click", function(e) {
          e.preventDefault();
          e.currentTarget.parentElement.submit();
        })
      });
    })();
    </script>
<script src="https://cdn.realpython.com/static/frontend/reader/repl-toggle.de6c7bf44788.js" async></script>
<script src="https://cdn.realpython.com/static/frontend/reader/lightbox.49cdac39212e.js" async></script>
<script>window.rp_prop_id = '58946116052';</script>
<script src="https://srv.realpython.net/tag.js" async></script>
<script src="https://cdn.realpython.com/static/frontend/reader/toc-refresh.76a102c7d921.js" async></script>
<script id="js-context" type="application/json">{"is_completed": false, "is_bookmarked": false, "api_article_bookmark_url": "/api/v1/articles/python-pyqt-qthread/bookmark/", "api_article_completion_status_url": "/api/v1/articles/python-pyqt-qthread/completion_status/"}</script>
<script src="https://cdn.realpython.com/static/frontend/reader/completion-status.352d07abd84a.js" async></script>
<script id="dsq-count-scr" src="https://realpython.disqus.com/count.js" async></script>
<script>
      var disqus_config = function () {
        this.page.url = 'https://realpython.com/python-pyqt-qthread/';
        this.page.identifier = 'https://realpython.com/python-pyqt-qthread/';
        this.callbacks.onReady = [function() {
          if (window.onDisqusReady) {
            window.onDisqusReady();
          }
        }];
      };
      var disqus_script_url = 'https://realpython.disqus.com/embed.js';
    </script>
<script src="https://cdn.realpython.com/static/frontend/reader/lazy-disqus.07ee9079f4a3.js" defer></script>
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Use PyQt\u0027s QThread to Prevent Freezing GUIs",
    
    "image": {
      "@type": "ImageObject",
      "url": "https://files.realpython.com/media/Using-Threads-in-PyQt_Watermarked.4976dbadca32.jpg",
      "width": 1920,
      "height": 1080
    },
    
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://realpython.com/python-pyqt-qthread/"
    },
    "datePublished": "2020-12-21T14:00:00+00:00",
    "dateModified": "2021-02-06T01:02:06.193080+00:00",
     "publisher": {
      "@type": "Organization",
      "name": "Real Python",
      "logo": {
        "@type": "ImageObject",
        "url": "https://cdn.realpython.com/static/real-python-logo-square-tiny.b2452b6d3823.png",
        "width": 60,
        "height": 60
      }
    },
    "author": {
      "@type": "Organization",
      "name": "Real Python",
      "url": "https://realpython.com",
      "logo": "https://cdn.realpython.com/static/real-python-logo-square.146e987bf77c.png"
    },
    "description": "In this step\u002Dby\u002Dstep tutorial, you’ll learn how to prevent freezing GUIs by offloading long\u002Drunning tasks to worker QThreads in PyQt."
  }
  </script>
<script>
  var _dcq = _dcq || [];
  var _dcs = _dcs || {};
  _dcs.account = '6214500';

  (function() {
    var dc = document.createElement('script');
    dc.type = 'text/javascript'; dc.async = true;
    dc.src = '//tag.getdrip.com/6214500.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(dc, s);
  })();
</script>
<script type="text/javascript">(function(){window['__CF$cv$params']={r:'694a458bed653762',m:'skcmKYrAPqqiL10TpSIynKHycAM4ReYjFl02eK0LXdU-1632636023-0-Af5XV2jkTNoBXezchpiTCV/WzAX4JZG4F7nvC2OKebhMkQAMSztFbwxFd/uIAh5ZT0phyKDpV8GiSOmsDgsH7GjypM8+MNjMRnBgykG7U9FKfqG27e6ak1zwY85gxtbKMkZsTW4VMgYe0rKsCv/r6yY=',s:[0x8a8b37ff68,0xb90497327f],u:'/cdn-cgi/challenge-platform/h/b'}})();</script></body>
</html>
